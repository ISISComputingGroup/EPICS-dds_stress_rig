record(ai, "$(P)ELONG") {
    field(DESC, "Elongation read from array")
    field(INP, "$(P)ARRAY.[0] CP MS")
    field(EGU, "um")
}

record(ai, "$(P)LOAD") {
    field(DESC, "Load read from array")
    field(INP, "$(P)ARRAY.[1] CP MS")
    field(EGU, "N")
}

record(ao, "$(P)LOAD:SP") {
    field(DESC, "Set-point for load")
    field(EGU, "N")
}

record(ai, "$(P)TIME") {
    field(DESC, "Time read from Array")
    field(INP, "$(P)ARRAY.[2] CP MS")
}

record(calc, "$(P)MOT:ACTIV") {
    field(DESC, "Motor Moving")
    field(CALC, "a!=0")
    field(INPA, "$(P)MOT:STAT CP MS")
}

record(seq, "$(P)CHANGE_SPEED"){
    field(DESC, "Command Sequence to set Speed.")
    field(DO0, "1")
    field(LNK0, "$(P)MODE:SPEED:SP PP")
    field(DO1, "0")
    field(LNK1, "$(P)CONTROL:SPEED:SP PP")
    field(DO2, "0")
    field(LNK2, "$(P)DIRECTION:SPEED:SP PP")
    field(DOL3, "$(P)SPEED:SP")
    field(LNK3, "$(P)_SPEED:SP PP")
    field(DO4, "1")
    field(LNK4, "$(P)SPEED:SET:SP PP")
    field(DO5, "2")
    field(LNK5, "$(P)DIRECTION:SPEED:SP PP")
    field(DLY5, "0.2")
    field(DO6, "1")
    field(LNK6, "$(P)SPEED:SET:SP PP")
    field(DLY6, "0.2")
    field(SCAN, "Passive")
    field(SELM, "All")
}

record(ao, "$(P)SPEED:SP") {
    field(DESC, "Target Speed")
}

record(seq, "$(P)START"){
    field(DESC, "Command Sequence to request a Start.")
    field(DO0, "1")
    field(LNK0, "$(P)MEAS:STOP:SP PP")
    field(DO1, "1")
    field(LNK1, "$(P)CHANNEL:SP PP")
    field(DO2, "0")
    field(LNK2, "$(P)ULIMIT:ENABLED:SP PP")
    field(DO3, "0")
    field(LNK3, "$(P)LLIMIT:ENABLED:SP PP")
    field(DO4, "2")
    field(DLY4, "0.2")
    field(LNK4, "$(P)CHANNEL:SP PP")
    field(DO5, "0")
    field(DLY5, "0.2")
    field(LNK5, "$(P)MOT:MODE:SP PP")
    field(DO6, "0")
    field(DLY6, "0.2")
    field(LNK6, "$(P)MODE:STAT:SP PP")
    field(DO7, "1")
    field(DLY7, "0.4")
    field(LNK7, "$(P)MODE:STAT:SP PP")
    field(DOL8, "$(P)TRGT")
    field(DLY8, "0.4")
    field(LNK8, "$(P)UPPER_LIMIT:SP PP")
    field(DOL9, "$(P)TRGT")
    field(DLY9, "0.4")
    field(LNK9, "$(P)LOWER_LIMIT:SP PP")
    field(DOA, "1")
    field(DLYA, "0.4")
    field(LNKA, "$(P)ULIMIT:ENABLED:SP PP")
    field(DOB, "1")
    field(DLYB, "0.4")
    field(LNKB, "$(P)LLIMIT:ENABLED:SP PP")
    field(DOC, "1")
    field(DLYC, "0.4")
    field(LNKC, "$(P)MEAS:STOP:SP PP")
    field(DOD, "1")
    field(DLYD, "0.4")
    field(LNKD, "$(P)MEAS:START:SP PP")
    field(SCAN, "Passive")
    field(SELM, "2")
    field(SELL, "$(P)_START_LIMIT PP")
    field(SHFT, "0")
}

record(ao, "$(P)TRGT") {
    field(DESC, "Target Value")
    field(EGU, "um")
}

record(calc, "$(P)_START_LIMIT") {
    field(DESC, "Start sequence limit mask")
    field(CALC, "a>b?13823:15103")
    field(INPA, "$(P)TRGT CP MS")
    field(INPB, "$(P)ELONG CP MS")
}

record(seq, "$(P)SET_LOAD"){
    field(DESC, "Command Sequence to set a load.")
    field(DO0, "1")
    field(LNK0, "$(P)MEAS:STOP:SP PP")
    field(DO1, "2")
    field(LNK1, "$(P)CHANNEL:SP PP")
    field(DO2, "0")
    field(LNK2, "$(P)ULIMIT:ENABLED:SP PP")
    field(DO3, "0")
    field(LNK3, "$(P)LLIMIT:ENABLED:SP PP")
    field(DO4, "1")
    field(DLY4, "0.2")
    field(LNK4, "$(P)CHANNEL:SP PP")
    field(DO5, "0")
    field(DLY5, "0.2")
    field(LNK5, "$(P)MOT:MODE:SP PP")
    field(DO6, "0")
    field(DLY6, "0.2")
    field(LNK6, "$(P)MODE:STAT:SP PP")
    field(DO7, "1")
    field(DLY7, "0.4")
    field(LNK7, "$(P)MODE:STAT:SP PP")
    field(DOL8, "$(P)LOAD:SP")
    field(DLY8, "0.4")
    field(LNK8, "$(P)UPPER_LIMIT:SP PP")
    field(DOL9, "$(P)LOAD:SP")
    field(DLY9, "0.4")
    field(LNK9, "$(P)LOWER_LIMIT:SP PP")
    field(DOA, "1")
    field(DLYA, "0.4")
    field(LNKA, "$(P)ULIMIT:ENABLED:SP PP")
    field(DOB, "1")
    field(DLYB, "0.4")
    field(LNKB, "$(P)LLIMIT:ENABLED:SP PP")
    field(DOC, "1")
    field(DLYC, "0.4")
    field(LNKC, "$(P)MEAS:STOP:SP PP")
    field(DOD, "1")
    field(DLYD, "0.4")
    field(LNKD, "$(P)MEAS:START:SP PP")
    field(SCAN, "Passive")
    field(SELM, "All")
    field(SHFT, "0")
}
